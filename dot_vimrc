autocmd!

""
" Vundle stuff
""
set nocompatible
filetype off
set rtp+=~/.vim/bundle/vundle/
call vundle#rc()
Bundle 'gmarik/vundle'
Bundle 'mattn/emmet-vim'
Bundle 'groenewege/vim-less'
Bundle 'mustache/vim-mustache-handlebars'
Bundle 'jtratner/vim-flavored-markdown'
Bundle 'scrooloose/nerdtree'
Bundle 'basecase/orgdown'
Bundle 'kchmck/vim-coffee-script'
Bundle 'ctrlpvim/ctrlp.vim'
Bundle 'tpope/vim-commentary'
Bundle 'godlygeek/tabular'
Bundle 'slim-template/vim-slim.git'
Bundle 'tpope/vim-fugitive'

""
" basic settings
""
filetype plugin indent on
syntax enable
set backspace=eol,indent,start
set backupdir=~/.vim_backup
set directory=~/.vim_backup
set foldopen-=search "search won't open closed folds on you
set hidden
set hlsearch
set ignorecase smartcase
set incsearch
set mouse=a
set nowrapscan "search doesn't wrap at top or bottom of file
set shell=/bin/bash\ -i "make shell commands load my bash config
set wildignore=*.pyc,*.o,.git,bower_components,node_modules,__pycache__,venv,dist,tmp
set wildmenu

""
" visual customizations
""
set background=dark
set cmdheight=2
set cursorline
set scrolloff=3
set showtabline=2
set t_Co=256
set winwidth=80
highlight CursorLine cterm=NONE ctermfg=NONE ctermbg=235
if has("gui_running")
  set background=light
  set guifont=Menlo:h14
endif

""
" whitespace settings
""
autocmd BufWritePre * :%s/\s\+$//e " delete trailing whitespace on save
set expandtab
set list listchars=tab:â†’.
set shiftwidth=2
set tabstop=2

""
" custom mappings
""
let mapleader=","
command! Q q
command! W w
map j gj
map k gk
map * *N
map <C-j> 10j
map <C-k> 10k
map <C-]> g<C-]>
map K k
imap <C-d> <C-o>x

map <leader>` :set wrap!<cr>
map <leader>c :%w !pbcopy<CR>
map <leader>j :cnext<cr>
map <leader>k :cprev<cr>
map <leader>l :set list!<cr>
map <leader>n :e ~/Dropbox/scratch_notes.md<cr>
" search for word under point in matching file types and open quickfix with results
map <leader>w yiw:vimgrep <c-r>" **/*.<c-r>=expand('%:e')<cr><cr>:copen<cr>

""
" filetype-specific configs
""
autocmd BufNewFile,BufRead *.md setlocal filetype=ghmarkdown
autocmd BufNewFile,BufRead *.us set syntax=jst
autocmd BufNewFile,BufRead local_bash_config setlocal filetype=sh
autocmd BufReadPost quickfix set modifiable
autocmd Filetype c setlocal shiftwidth=4 tabstop=4
autocmd Filetype eruby setlocal shiftwidth=2 tabstop=2 expandtab
autocmd Filetype ghmarkdown,text setlocal nolist linebreak wrap
autocmd Filetype python setlocal shiftwidth=4 tabstop=4
autocmd Filetype ruby setlocal regexpengine=1 nocursorline

""
" plugin-related settings
""
let g:ctrlp_working_path_mode = 0
let g:ctrlp_match_window = 'max:30'
map <leader>b :CtrlPBuffer<cr>
map <leader>f :CtrlP<cr>
map <leader>z :NERDTreeToggle<cr>

""
" load untracked local settings
""
source ~/.local_vimrc
